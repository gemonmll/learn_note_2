åœ¨ VSCode ä¸­ï¼Œä½  **å¯ä»¥ç”¨ Task æ¥å…ˆæ‰§è¡Œ export ç¯å¢ƒå˜é‡**ï¼Œå†è®© gdb å¯åŠ¨è°ƒè¯•ç¨‹åºã€‚
ä½†æ³¨æ„ï¼š**ä»»åŠ¡(task)é‡Œçš„ export å¯¹ VSCode ä¸»è¿›ç¨‹æ— æ•ˆï¼Œåªå¯¹ task å­è¿›ç¨‹æœ‰æ•ˆ**ï¼Œæ‰€ä»¥å¿…é¡»ç”¨ *task å»å¯åŠ¨ gdb*ï¼Œæˆ–è€…è®© task ç”Ÿæˆä¸€ä¸ªç¯å¢ƒæ–‡ä»¶ç»™ launch.json è¯»å–ã€‚

ä¸‹é¢ç»™ä½ ä¸¤ç§å¯è¡Œæ–¹æ¡ˆï¼Œ**æ¨èæ–¹æ¡ˆ Aï¼ˆç›´æ¥é€šè¿‡ä»»åŠ¡å¯åŠ¨ gdbï¼‰**ã€‚

---

# âœ… **æ–¹æ¡ˆ Aï¼šç”¨ task å¯åŠ¨ gdbï¼ˆæœ€ç®€å•ã€æœ€ç¨³å®šï¼‰**

ä½ åˆ›å»ºä¸€ä¸ª task æ‰§è¡Œ exportï¼Œç„¶å task å¯åŠ¨ gdb è¿›è¡Œè°ƒè¯•ã€‚

### ğŸ”§ 1. åˆ›å»ºä»»åŠ¡ï¼š`.vscode/tasks.json`

```jsonc
{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "run-gdb-with-env",
            "type": "shell",
            "command": "export LD_LIBRARY_PATH=/home/xxx/lib:$LD_LIBRARY_PATH && gdb ./your_program",
            "problemMatcher": []
        }
    ]
}
```

### ğŸ”¥ è¿è¡Œæ–¹å¼ï¼š

* VSCode `Ctrl+Shift+P`
* è¾“å…¥ `Run Task`
* é€‰æ‹© **run-gdb-with-env**

è¿™ä¼šå¯åŠ¨ä¸€ä¸ªç»ˆç«¯ï¼Œé‡Œé¢å·²ç»æ‰§è¡Œè¿‡ exportï¼Œç„¶åè¿›å…¥ gdbã€‚

---

# âš ï¸ è‹¥ä½ æƒ³ç”¨ VSCode çš„ â€œStart Debuggingâ€ æŒ‰é’®ï¼ˆF5ï¼‰ï¼Œå°±çœ‹æ–¹æ¡ˆ Bï¼Œå› ä¸º Task çš„ç¯å¢ƒä¸èƒ½ç›´æ¥ä¼ ç»™ Launch è°ƒè¯•å™¨ã€‚

---

# âœ… **æ–¹æ¡ˆ Bï¼šTask å†™ç¯å¢ƒ â†’ Launch.json è¯»å–ç¯å¢ƒæ–‡ä»¶ï¼ˆé«˜çº§åšæ³•ï¼‰**

æµç¨‹ï¼š

1. task ç”Ÿæˆä¸€ä¸ªåŒ…å«ç¯å¢ƒå˜é‡çš„æ–‡ä»¶
2. launch.json è¯»å–è¯¥æ–‡ä»¶ï¼Œå¹¶æŠŠç¯å¢ƒå˜é‡ä¼ ç»™ gdb

### ğŸ”§ 1. åˆ›å»º taskï¼šç”Ÿæˆ env æ–‡ä»¶

`.vscode/tasks.json`ï¼š

```jsonc
{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "prepare-env",
            "type": "shell",
            "command": "echo \"LD_LIBRARY_PATH=/home/xxx/lib:$LD_LIBRARY_PATH\" > .vscode/debug_env",
            "problemMatcher": []
        }
    ]
}
```

è¿è¡Œåä¼šç”Ÿæˆï¼š

```
.vscode/debug_env
```

å†…å®¹ç¤ºä¾‹ï¼š

```
LD_LIBRARY_PATH=/home/xxx/lib:/usr/lib
```

---

### ğŸ”§ 2. launch.json è¯»å– env æ–‡ä»¶

VSCode æ”¯æŒ `"envFile"` å­—æ®µã€‚

`.vscode/launch.json`

```jsonc
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Launch Program",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/your_program",
            "cwd": "${workspaceFolder}",
            "envFile": "${workspaceFolder}/.vscode/debug_env",
            "MIMode": "gdb",
            "miDebuggerPath": "/usr/bin/gdb"
        }
    ]
}
```

---

### ğŸ”¥ ä½¿ç”¨æ­¥éª¤ï¼š

1. å…ˆæ‰§è¡Œ Taskï¼ˆå†™ç¯å¢ƒæ–‡ä»¶ï¼‰

   * `Ctrl+Shift+P` â†’ **Run Task** â†’ é€‰æ‹© `prepare-env`

2. å†æŒ‰ **F5** å¯åŠ¨ gdb è°ƒè¯•ç¨‹åº
   â€” æ­¤æ—¶ gdb ä¼šè‡ªåŠ¨å¸¦ä¸Šä½ å¯¼å‡ºçš„ LD_LIBRARY_PATH

---

# â­ æ–¹æ¡ˆå¯¹æ¯”æ€»ç»“

| æ–¹å¼                              | æ˜¯å¦ç®€å•  | æ˜¯å¦å¯æŒ‰ F5 è°ƒè¯• | è¯´æ˜                          |
| ------------------------------- | ----- | ---------- | --------------------------- |
| **A. Task ç›´æ¥å¯åŠ¨ gdb**            | â­â­â­â­â­ | âŒ          | æœ€ç®€å•ï¼Œä¸ä¾èµ– launch.json         |
| **B. Taskâ†’envFileâ†’launch.json** | â­â­â­   | âœ”ï¸         | VSCode å®˜æ–¹æ¨èæ–¹å¼ï¼Œéœ€è¦ä¸¤ä¸ªæ–‡ä»¶        |
| åœ¨ launch.json ç›´æ¥å†™ environment   | â­â­â­â­â­ | âœ”ï¸         | æœ€æ¨èï¼Œä½†ä¸æ˜¯ä½ é—®çš„â€œç”¨ task å…ˆ exportâ€ |

---

# ğŸ“Œ å¦‚æœä½ å‘Šè¯‰æˆ‘ä½ çš„å½“å‰ launch.json å’Œä½ çš„ lib è·¯å¾„

æˆ‘å¯ä»¥å¸®ä½ æŠŠ **task + launch.json** é…ç½®æˆä½ é¡¹ç›®ä¸“å±çš„å¯ç”¨ç‰ˆæœ¬ã€‚
