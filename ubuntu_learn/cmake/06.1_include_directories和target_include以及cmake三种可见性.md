ä¸‹é¢æˆ‘æŠŠ **`target_include_directories()`** å’Œ **`include_directories()`** çš„åŒºåˆ«ï¼Œç”¨**éå¸¸æ¸…æ™°ã€å·¥ç¨‹çº§**çš„æ–¹å¼è®²ç»™ä½ å¬ã€‚

è¿™æ˜¯ CMake ä¸­æœ€å¸¸è§ã€ä½†ä¹Ÿæ˜¯æœ€å¤šäººç”¨é”™çš„éƒ¨åˆ†ã€‚

---

# ğŸ”¥ ä¸€å¥è¯æ€»ç»“

| æŒ‡ä»¤                               | ä½œç”¨èŒƒå›´                                           | æ¨èåº¦              |
| -------------------------------- | ---------------------------------------------- | ---------------- |
| **include_directories()**        | å…¨å±€æ±¡æŸ“æ•´ä¸ª CMakeï¼ˆæ‰€æœ‰ target éƒ½èƒ½çœ‹åˆ°ï¼‰                   | âŒ ä¸æ¨èï¼ˆè€å¼å†™æ³•ï¼‰      |
| **target_include_directories()** | åªå¯¹æŒ‡å®š target ç”Ÿæ•ˆï¼Œä½œç”¨åŸŸå¯æ§ï¼ˆPUBLIC/PRIVATE/INTERFACEï¼‰ | âœ… å¼ºçƒˆæ¨èï¼ˆç°ä»£ CMakeï¼‰ |

---

# ğŸ¯ **æ ¸å¿ƒåŒºåˆ«è§£æ**

## â‘  **ä½œç”¨èŒƒå›´ä¸åŒ**

### âœ” `include_directories()` â€”â€” å…¨å±€ä¿®æ”¹

ä¾‹å­ï¼š

```cmake
include_directories(${CMAKE_CURRENT_SOURCE_DIR}/src)
```

ç­‰äºå‘Šè¯‰ CMakeï¼š

> â€œä»ç°åœ¨å¼€å§‹ï¼Œæ•´ä¸ªå·¥ç¨‹é‡Œæ‰€æœ‰ target ç¼–è¯‘æ—¶éƒ½åŠ ä¸Š -I srcã€‚â€

ç¼ºç‚¹ï¼š

* å®¹æ˜“é€ æˆ include æ±¡æŸ“
* è®©ä¾èµ–å…³ç³»ä¸æ¸…æ™°
* å¤§å·¥ç¨‹é‡Œä¼šéš¾ä»¥ç»´æŠ¤

---

### âœ” `target_include_directories()` â€”â€” ç²¾å‡†æ§åˆ¶

ä¾‹å­ï¼š

```cmake
target_include_directories(myLib PRIVATE src)
```

è¿™è¡¨ç¤ºï¼š

> â€œåªæœ‰ myLib ç¼–è¯‘æ—¶ä½¿ç”¨ src ç›®å½•ã€‚â€

ä¸ä¼šå½±å“å…¶ä»– targetã€‚

---

## â‘¡ **ç°ä»£ CMake æ”¯æŒ include çš„ä¼ æ’­ï¼ˆPUBLIC / PRIVATE / INTERFACEï¼‰**

âš  è¿™æ˜¯ include_directories() åšä¸åˆ°çš„ï¼

### target_include_directories æ”¯æŒ 3 ç§å¯è§æ€§ï¼š

#### 1) PRIVATE â€”â€” ä»…åœ¨å½“å‰ target å†…ä½¿ç”¨

```cmake
target_include_directories(myLib PRIVATE include)
```

ç¼–è¯‘ myLib æ—¶ï¼š

```
g++ ... -I include
```

ä¸‹æ¸¸ä¾èµ– **ä¸ä¼š**ç»§æ‰¿ã€‚

---

#### 2) PUBLIC â€”â€” å½“å‰ target å’Œä¾èµ–å®ƒçš„ target éƒ½èƒ½ç”¨

```cmake
target_include_directories(myLib PUBLIC include)
```

ä¸‹æ¸¸è¿™æ ·ç”¨ myLibï¼š

```cmake
target_link_libraries(MyApp PRIVATE myLib)
```

ç¼–è¯‘ MyApp æ—¶ä¼šè‡ªåŠ¨æ·»åŠ ï¼š

```
-I include
```

---

#### 3) INTERFACE â€”â€” åªç»™ä½¿ç”¨è€…ï¼Œä¸ç»™åº“æœ¬èº«

```cmake
target_include_directories(myLib INTERFACE include)
```

è¿™ç§ç»å¤§å¤šæ•°ç”¨äº header-only åº“ã€‚

---

# â‘¢ ä¾èµ–å…³ç³»æ¸…æ™°

ä½¿ç”¨ target_include_directories + PUBLIC / PRIVATEï¼š

* ä¾èµ–ä¼ é€’æ˜ç¡®
* å“ªä¸ªåº“æš´éœ²å“ªäº›å¤´æ–‡ä»¶å¾ˆæ¸…æ¥š
* IDEï¼ˆVSCode/CLionï¼‰èƒ½è‡ªåŠ¨å»ºç«‹ include è·¯å¾„
* å¯ç»´æŠ¤æ€§é«˜

ä½¿ç”¨ include_directoriesï¼š

* å·¥ç¨‹å˜å¤§åï¼Œä½ æ ¹æœ¬æä¸æ¸…å“ªäº› include æ¥è‡ªå“ªé‡Œ
* å¾ˆå®¹æ˜“å‡ºç°æŸ¥é”™æŸ¥åˆ°æ€€ç–‘äººç”Ÿ

---

# â‘£ å®é™…å·¥ç¨‹å»ºè®®

## âŒ ä¸è¦å†ç”¨ include_directories

é™¤éä½ åšçš„æ˜¯è¶…çº§ç®€å•çš„ demo å·¥ç¨‹ã€‚

## âœ” æ¨èè¿™æ ·å†™ï¼š

```cmake
add_library(ztoolkit STATIC ${SRC_LIST})

target_include_directories(ztoolkit
    PUBLIC
        ${CMAKE_CURRENT_SOURCE_DIR}/src   # æä¾›ç»™ä¸‹æ¸¸
)
```

ç„¶åä½ çš„ ADAS_Replay_Tool è¿™æ ·ç”¨ï¼š

```cmake
target_link_libraries(ADAS_Replay_Tool PRIVATE ztoolkit)
```

æ‰€æœ‰ include path è‡ªåŠ¨ç»§æ‰¿ï¼Œæ— éœ€æ‰‹åŠ¨å†™ä»»ä½• includeã€‚

---

# ğŸ”¥ å®æˆ˜å¯¹æ¯”ï¼ˆä½ çœ‹è¿™ä¸€å¯¹æ¯”å°±æ‡‚äº†ï¼‰

## âŒ è€å¼å†™æ³•ï¼ˆæ±¡æŸ“å…¨å±€ï¼‰

```cmake
include_directories(zltoolkit/src)
add_library(ztoolkit ...)
add_executable(replay ...)
```

æ‰€æœ‰ target éƒ½ä¼šåŒ…å« zltoolkit/srcï¼Œå“ªæ€•ä¸éœ€è¦å®ƒã€‚

---

## âœ… ç°ä»£å†™æ³•ï¼ˆå¹²å‡€ã€å¯ç»´æŠ¤ï¼‰

```cmake
add_library(ztoolkit ...)
target_include_directories(ztoolkit PUBLIC zltoolkit/src)

add_executable(replay ...)
target_link_libraries(replay PRIVATE ztoolkit)
```

åªæœ‰ replay ç”¨åˆ°æ—¶æ‰ä¼šç»§æ‰¿ includeã€‚

---

# ç»“è®º

| ç‰¹æ€§               | include_directories | target_include_directories     |
| ---------------- | ------------------- | ------------------------------ |
| ä½œç”¨èŒƒå›´             | å…¨å±€                  | per-target                     |
| ä¾èµ–ç®¡ç†             | âŒ ä¸æ¸…æ™°               | âœ” æ¸…æ™°                           |
| ä¸Šæ¸¸/ä¸‹æ¸¸ include ä¼ æ’­ | âŒ ä¸æ”¯æŒ               | âœ” æ”¯æŒï¼ˆPUBLIC/PRIVATE/INTERFACEï¼‰ |
| ç°ä»£ CMake æ¨è      | âŒ                   | âœ”âœ”âœ”                            |

### ğŸ‘‰ **æ€»ä¹‹ï¼Œç°ä»£ CMake å»ºè®®å®Œå…¨æ”¾å¼ƒ include_directoriesï¼Œå…¨éƒ¨ç”¨ target_include_directoriesã€‚**

---

å¦‚æœä½ ç»™æˆ‘ä½ çš„ ADAS_Replay_Tool çš„ CMakeListsï¼Œæˆ‘å¯ä»¥å¸®ä½ é‡æ„æˆâ€œç°ä»£å†™æ³•â€ï¼Œå¯ç»´æŠ¤æ€§ä¼šå¤§å¤§æé«˜ã€‚
