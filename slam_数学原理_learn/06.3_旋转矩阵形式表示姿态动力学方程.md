# 推导：为什么 $(\dot R = R[\omega]_\times)$

我们从最基本的物理定义出发，逐步推导出这个公式。目标是把每一步写清楚、不过分绕弯。

---

## 1) 旋转矩阵的含义（记号）

设 $(R(t)\in SO(3))$ 是把**机体坐标系 B** 的向量表示转换到**世界坐标系 W** 的矩阵。
对任意在机体坐标系中表示为 (x_B) 的向量，其在世界系的表示为
[
$$x_W(t) = R(t),x_B.$$
]
注意：如果向量随时间 (t) 变化，两个表示间仍然满足上式（因为 (R) 随时间变化）。

---

## 2) 选一个方便的向量：机体固定的基向量

取机体坐标系的基向量 $(e_i^B)（(i=1,2,3)）$，它在机体系中**恒定不变**（即 $( \frac{d}{dt}e_i^B=0)）$。
但它在世界系中的表示是
[
$e_i^W(t) = R(t),e_i^B.$
]
对这个世界向量求时间导数（链式），得到
[
$\dot e_i^W(t) = \dot R(t),e_i^B. \tag{A}$
]

另一方面，物理上基向量在世界系的变化等于**由角速度引起的旋转** —— 这正是角速度的定义：角速度向量$ (\omega(t))$（通常在机体系中表达）使得任意固定于机体的向量在世界系的导数满足
[
$\dot e_i^W(t) = \omega_W(t)\times e_i^W(t).$
]
这里 (\omega_W) 是在**世界系**表示的角速度向量。如果我们用机体系表示的角速度 $(\omega_B)$，两者满足
[
$\omega_W = R,\omega_B.$
]

把 $(e_i^W = R e_i^B) $代入叉乘表达式：
[
$\dot e_i^W = \omega_W \times (R e_i^B) = (R\omega_B)\times (R e_i^B).$
]

叉乘的旋转不变性（即 $(R(a\times b) = (Ra)\times(Rb))）$允许我们写成
[
$\dot e_i^W = R,(\omega_B \times e_i^B). \tag{B}$
]

---

## 3) 用矩阵形式把叉乘写成反对称矩阵

定义反对称$skew$矩阵 $([\omega_B]*\times)$ 使得对任意向量 $(v)$ 有
[
$[\omega_B]*\times v = \omega_B \times v.$
]
将 (B) 改写为
[
$\dot e_i^W = R,[\omega_B]_\times,e_i^B.$
]

比较 (A) 中的 (\dot e_i^W = \dot R,e_i^B)，由于对 (i=1,2,3)（三基向量）都成立，我们可以去掉 (e_i^B)，得到矩阵恒等：
[
$\dot R = R,[\omega_B]_\times.$
]

这就是所要的公式。注意这里 (\omega_B) 是**在机体坐标系（body frame）**下表示的角速度。如果你把角速度表示为在世界系 (\omega_W)，对应的形式是
[
$\dot R = [\omega_W]_\times,R,$
]
两者是等价的（通过 $(\omega_W = R,\omega_B)$ 和反对称矩阵的共轭关系）。

---

## 4) 为什么是左乘 $(R[\omega]*\times)$（而不是 $([\omega]*\times R)$？

* 如果 $(\omega)$ 是在**机体系**表示（常见做法，因为陀螺测的是机体角速度），结论是 $(\dot R = R[\omega_B]_\times)$。
* 如果 $(\omega)$ 在**世界系**表示，结论是 $(\dot R = [\omega_W]_\times R)$。

两种写法等价，因为
[
$[\omega_W]*\times = R,[\omega_B]*\times R^\top,$
]
从而可互相变换。要用哪一个，关键看你用哪一系表示 $(\omega)$。

---

## 5) 离散化（数值积分）提示

在连续表达式基础上，一小段时间 (dt) 的离散更新常用矩阵指数（exponential map）：
[
$$R(t+dt) = R(t),\exp\big([\omega_B,dt]*\times\big),$$
]
其中 $(\exp([\theta]*\times))$ 给出绕向量 $(\theta)$ 旋转的 Rodrigues 公式。

---

## 6) 变形与四元数形式（快速补充）

用四元数 (q) 表示姿态时，对应的微分方程是
[
$\dot q = \tfrac12 , \Omega(\omega_B), q,$
]
其本质与 $(\dot R = R[\omega_B]_\times)$ 完全等价（只是参数化不同）。

---

## 小结（一句话）

$(\dot R = R[\omega]_\times)$来自于：**机体固定向量在世界系的时间导数由角速度产生的旋转决定**，把这个物理事实用矩阵形式写出并代入旋转矩阵表达，就得到该公式。关键点是明确“角速度是在机体系还是世界系表示”。

---

如果你愿意，我可以：

* 把上述推导写成更严谨的线性代数版本（含共轭证明）；
* 推导离散 $Rodrigues / matrix-exp$ 的具体展开（便于实现）；
* 或者给出具体数值例子（用小角速度积分更新 (R)）并演示数值误差。

你想看哪一个？
