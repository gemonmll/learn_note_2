å¥½ï¼Œæˆ‘ä»¬æ¥ä¸€æ­¥æ­¥**å½»åº•æ‹†è§£**ä¸€ä¸‹è¿™æ®µä»£ç ï¼Œè§£é‡Šæ¯ä¸ªéƒ¨åˆ†åˆ°åº•åœ¨å¹²ä»€ä¹ˆï¼Œä»¥åŠå®ƒå’Œ ROS 2 çš„æ¶ˆæ¯ç³»ç»Ÿæœ‰ä»€ä¹ˆå…³ç³»ã€‚

---

## ğŸ“¦ æ–‡ä»¶ä½ç½®ä¸ä½œç”¨

æ–‡ä»¶è·¯å¾„ï¼š

```
/opt/ros/<distro>/include/std_msgs/msg/string.hpp
```

è¿™æ˜¯ ROS 2 è‡ªå¸¦çš„æ ‡å‡†æ¶ˆæ¯å®šä¹‰åŒ… `std_msgs`ï¼ˆstandard messagesï¼‰çš„ä¸€éƒ¨åˆ†ã€‚
å…·ä½“æ¥è¯´ï¼š

* `std_msgs/msg/string.hpp` æ˜¯ä¸€ä¸ª **è‡ªåŠ¨ç”Ÿæˆçš„ C++ å¤´æ–‡ä»¶**ã€‚
* å®ƒæä¾›äº†åœ¨ C++ èŠ‚ç‚¹ä¸­ä½¿ç”¨ `std_msgs::msg::String` æ¶ˆæ¯ç±»å‹æ‰€éœ€çš„ä¸€åˆ‡å®šä¹‰ã€‚

å½“ä½ åœ¨ä»£ç ä¸­å†™ï¼š

```cpp
#include <std_msgs/msg/string.hpp>
```

ä½ å°±å¼•å…¥äº† ROS 2 çš„ **æ ‡å‡† String æ¶ˆæ¯ç±»å‹**ï¼Œç±»ä¼¼äº Python é‡Œçš„ï¼š

```python
from std_msgs.msg import String
```

---

## ğŸ§± æ–‡ä»¶ç»“æ„è§£è¯»

æ¥çœ‹ä½ è´´çš„ä»£ç ï¼š

```cpp
#ifndef STD_MSGS__MSG__STRING_HPP_
#define STD_MSGS__MSG__STRING_HPP_

#include "std_msgs/msg/detail/string__struct.hpp"
#include "std_msgs/msg/detail/string__builder.hpp"
#include "std_msgs/msg/detail/string__traits.hpp"
#include "std_msgs/msg/detail/string__type_support.hpp"

#endif  // STD_MSGS__MSG__STRING_HPP_
```

è¿™ä¸ªæ–‡ä»¶å…¶å®**æœ¬èº«æ²¡å†…å®¹**ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªâ€œèšåˆå¤´æ–‡ä»¶â€ï¼š

* å®ƒè´Ÿè´£æŠŠç”Ÿæˆçš„åº•å±‚å®ç°å¤´æ–‡ä»¶éƒ½å¼•å…¥è¿›æ¥ï¼›
* ç„¶åä½ åªè¦ `#include <std_msgs/msg/string.hpp>` å°±èƒ½ä½¿ç”¨æ•´å¥—æ¥å£ã€‚

è¿™äº› `detail/xxx.hpp` æ˜¯ ROS 2 çš„ä»£ç ç”Ÿæˆå™¨åœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ¯”å¦‚ï¼š

| æ–‡ä»¶                         | ä½œç”¨                                          |
| -------------------------- | ------------------------------------------- |
| `string__struct.hpp`       | å®šä¹‰äº† `std_msgs::msg::String` çš„å®é™…æ•°æ®ç»“æ„ï¼ˆstructï¼‰ |
| `string__builder.hpp`      | æä¾›æ–¹ä¾¿æ„é€ æ¶ˆæ¯å¯¹è±¡çš„â€œBuilderâ€æ¨¡å¼æ¥å£                    |
| `string__traits.hpp`       | æè¿°è¿™ä¸ªæ¶ˆæ¯çš„ç‰¹å¾ï¼ˆä¾‹å¦‚æ˜¯å¦å›ºå®šå¤§å°ã€æ˜¯å¦æœ‰ header ç­‰ï¼‰            |
| `string__type_support.hpp` | æä¾›æ¶ˆæ¯åºåˆ—åŒ– / ååºåˆ—åŒ–ã€DDS é€šä¿¡æ”¯æŒ                     |

---

## ğŸ” ä¸¾ä¸ªå®é™…ä¾‹å­

`string__struct.hpp`ï¼ˆä¸»è¦éƒ¨åˆ†ï¼‰é‡Œä¼šæœ‰ç±»ä¼¼çš„å®šä¹‰ï¼š

```cpp
namespace std_msgs
{
namespace msg
{

struct String
{
  using Type = String;

  explicit String(rosidl_runtime_cpp::MessageInitialization _init = rosidl_runtime_cpp::MessageInitialization::ALL)
  : data("")
  {}

  std::string data;
};

}  // namespace msg
}  // namespace std_msgs
```

ä¹Ÿå°±æ˜¯è¯´ï¼š

```cpp
std_msgs::msg::String msg;
msg.data = "Hello ROS2";
```

è¿™ä¸ª `msg` å°±æ˜¯ä½ åœ¨ Publisher æˆ– Subscriber é‡Œä¼ é€’çš„æ¶ˆæ¯ã€‚

---

## ğŸ§  å†çœ‹è¿™ä¸€è¡Œ

```cpp
private:
  ::std_msgs::msg::String msg_;
```

è§£é‡Šå…³é”®ç‚¹ï¼š

### `::` æ˜¯ä»€ä¹ˆï¼Ÿ

`::` æ˜¯ **C++ çš„ä½œç”¨åŸŸè§£æç¬¦ï¼ˆscope resolution operatorï¼‰**ã€‚
å®ƒçš„ä½œç”¨æ˜¯æŒ‡å®šâ€œå‘½åç©ºé—´è·¯å¾„â€ï¼Œé¿å…å‘½åå†²çªã€‚

ä¸¾ä¾‹ï¼š

```cpp
std_msgs::msg::String msg;  // æ­£å¸¸å†™æ³•
::std_msgs::msg::String msg; // ç»å¯¹å‘½åç©ºé—´å†™æ³•ï¼ˆä»å…¨å±€å‘½åç©ºé—´å¼€å§‹ï¼‰
```

`::` å¼€å¤´è¡¨ç¤ºâ€œä»å…¨å±€ä½œç”¨åŸŸå¼€å§‹è§£æâ€ï¼Œ
ç›¸å½“äºå‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œåˆ«ä»å½“å‰ç±»æˆ–å±€éƒ¨ä½œç”¨åŸŸæ‰¾ std_msgsï¼Œè€Œæ˜¯ä»é¡¶å±‚æ‰¾â€ã€‚

æ‰€ä»¥ï¼š

```cpp
::std_msgs::msg::String msg_;
```

å’Œ

```cpp
std_msgs::msg::String msg_;
```

æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯æ›´æ˜ç¡®ï¼Œå¸¸è§äºç”Ÿæˆä»£ç æˆ–åº“ä»£ç ä¸­ã€‚

---

## âœ… æ€»ç»“ä¸€ä¸‹

| å†…å®¹                                   | ä½œç”¨                                    |
| ------------------------------------ | ------------------------------------- |
| `#include <std_msgs/msg/string.hpp>` | å¼•å…¥æ ‡å‡†çš„ ROS 2 String æ¶ˆæ¯å®šä¹‰               |
| `std_msgs::msg::String`              | ROS 2 çš„å­—ç¬¦ä¸²æ¶ˆæ¯ç»“æ„ï¼ˆåŒ…å« `std::string data`ï¼‰ |
| `::`                                 | ä»å…¨å±€ä½œç”¨åŸŸå¼€å§‹è§£æå‘½åç©ºé—´ï¼ˆé˜²æ­¢å†²çªï¼‰                  |
| `msg_`                               | ä¸€èˆ¬æ˜¯ç±»ä¸­çš„æˆå‘˜å˜é‡ï¼Œç”¨æ¥å­˜æ”¾æ¶ˆæ¯å¯¹è±¡                   |
| `ament_cmake`                        | æ˜¯ ROS 2 çš„æ„å»ºç³»ç»Ÿï¼Œè´Ÿè´£è‡ªåŠ¨ç”Ÿæˆè¿™äº›æ¶ˆæ¯å¤´æ–‡ä»¶å¹¶é›†æˆåˆ°æ„å»ºè¿‡ç¨‹ä¸­  |

---

è¦ä¸è¦æˆ‘æ¥ç€å¸®ä½ çœ‹ä¸€ä¸‹ `std_msgs::msg::String` æ˜¯æ€ä¹ˆåœ¨ ROS 2 é€šä¿¡ä¸­â€œå˜æˆå¯ä»¥ä¼ è¾“çš„æ¶ˆæ¯â€çš„ï¼ˆä¹Ÿå°±æ˜¯ type support / serialization éƒ¨åˆ†ï¼‰ï¼Ÿ
è¿™ä¸ªä¼šè®©ä½ æ›´æ˜ç™½ä¸ºä»€ä¹ˆ C++ çš„ Publisher å’Œ Subscriber å¯ä»¥ç›´æ¥ç”¨è¿™ä¸ªç»“æ„é€šä¿¡ã€‚


---

éå¸¸å¥½ ğŸ‘ â€” è¿™ä¸¤ä¸ªé—®é¢˜éƒ½éå¸¸å…¸å‹ï¼Œ
å®ƒä»¬åˆ†åˆ«æ¶‰åŠåˆ° **ROS 2 çš„æ¶ˆæ¯æœºåˆ¶** å’Œ **C++ çš„å‘½åç©ºé—´è¯­æ³•**ã€‚
æˆ‘ä»¬æ¥ä¸€æ¡ä¸€æ¡å½»åº•è®²æ¸…æ¥š ğŸ‘‡

---

## ğŸ§© ä¸€ã€`#include <std_msgs/msg/string.hpp>` æ˜¯ä»€ä¹ˆï¼Ÿ

### âœ… ç®€å•è¯´ï¼š

> å®ƒå¼•å…¥äº† **ROS 2 æ ‡å‡†æ¶ˆæ¯ç±»å‹åº“ï¼ˆstandard messagesï¼‰** ä¸­çš„ **String æ¶ˆæ¯å®šä¹‰**ã€‚

---

### ğŸ§  èƒŒæ™¯çŸ¥è¯†ï¼šROS 2 æ¶ˆæ¯ï¼ˆmessageï¼‰

åœ¨ ROS é‡Œï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šä¿¡ï¼ˆPublisher / Subscriberï¼‰ç”¨çš„æ˜¯ **æ¶ˆæ¯ç±»å‹ï¼ˆmsgï¼‰**ã€‚
ä¾‹å¦‚ï¼š

| æ¶ˆæ¯ç±»å‹                      | å†…å®¹            |
| ------------------------- | ------------- |
| `std_msgs/msg/String`     | ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²      |
| `geometry_msgs/msg/Twist` | é€Ÿåº¦ï¼ˆçº¿é€Ÿåº¦ + è§’é€Ÿåº¦ï¼‰ |
| `sensor_msgs/msg/Image`   | æ‘„åƒå¤´å›¾åƒ         |
| `nav_msgs/msg/Odometry`   | é‡Œç¨‹è®¡ä¿¡æ¯         |

---

### ğŸ“¦ `std_msgs` æ˜¯ä»€ä¹ˆåŒ…ï¼Ÿ

`std_msgs`ï¼ˆstandard messagesï¼‰æ˜¯ ROS æä¾›çš„æœ€åŸºç¡€æ¶ˆæ¯åº“ï¼Œ
é‡Œé¢å®šä¹‰äº†ä¸€äº›æœ€å¸¸è§çš„æ•°æ®ç±»å‹ï¼š

```
std_msgs/msg/
 â”œâ”€â”€ Bool.msg
 â”œâ”€â”€ Int32.msg
 â”œâ”€â”€ Float32.msg
 â”œâ”€â”€ String.msg
 â””â”€â”€ Header.msg
```

æ¯ä¸ª `.msg` æ–‡ä»¶éƒ½æ˜¯ä¸€ç§ ROS æ¶ˆæ¯ç»“æ„å®šä¹‰ã€‚

---

### ğŸ“„ ä¸¾ä¾‹ï¼š`String.msg` çš„å†…å®¹

å®ƒå®é™…ä¸ŠåªåŒ…å«ä¸€è¡Œï¼š

```text
string data
```

è¿™è¡¨ç¤ºï¼š
è¿™ä¸ªæ¶ˆæ¯ç±»å‹æœ‰ä¸€ä¸ªæˆå‘˜å˜é‡å« `data`ï¼Œç±»å‹æ˜¯ `string`ã€‚

---

### âš™ï¸ ROS 2 æ„å»ºç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆ C++ å¯¹åº”çš„ç±»

åœ¨ç¼–è¯‘æ—¶ï¼ŒROS 2 ä¼šæ ¹æ® `String.msg` è‡ªåŠ¨ç”Ÿæˆ C++ å¤´æ–‡ä»¶ï¼š

```
std_msgs/msg/string.hpp
```

é‡Œé¢å¤§è‡´å®šä¹‰äº†ï¼š

```cpp
namespace std_msgs
{
namespace msg
{

struct String
{
  std::string data;
};

}  // namespace msg
}  // namespace std_msgs
```

---

### ğŸ“¥ æ‰€ä»¥ï¼Œå½“ä½ å†™ï¼š

```cpp
#include <std_msgs/msg/string.hpp>
```

å°±ç›¸å½“äºå‘Šè¯‰ç¼–è¯‘å™¨ï¼š

> â€œæˆ‘è¦ä½¿ç”¨ ROS 2 è‡ªå¸¦çš„å­—ç¬¦ä¸²æ¶ˆæ¯ç±»å‹ã€‚â€

---

## ğŸ§© äºŒã€é‚£è¿™è¡Œæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

```cpp
private:
  ::std_msgs::msg::String msg_;
```

è¿™è¡Œå£°æ˜äº†ä¸€ä¸ªæˆå‘˜å˜é‡ `msg_`ï¼Œç±»å‹æ˜¯ `std_msgs::msg::String`ã€‚

---

### ğŸ§ é‚£å‰é¢çš„ `::` æ˜¯ä»€ä¹ˆï¼Ÿ

è¿™æ˜¯ C++ çš„ **å…¨å±€å‘½åç©ºé—´è§£æç¬¦**ã€‚

---

### ğŸ” ä¸€ç‚¹è¯­æ³•èƒŒæ™¯

C++ ä¸­çš„å‘½åç©ºé—´ï¼ˆnamespaceï¼‰æ˜¯ä¸ºäº†é˜²æ­¢åå­—å†²çªçš„æœºåˆ¶ã€‚

æ¯”å¦‚ï¼š

```cpp
namespace my_ns {
  int a = 10;
}
int a = 20;

std::cout << a;        // è¾“å‡º 20
std::cout << my_ns::a; // è¾“å‡º 10
```

---

### ğŸš© å½“ä½ å†™ `::`ï¼ˆåŒå†’å·ï¼‰æ—¶

å®ƒè¡¨ç¤ºâ€œä» **å…¨å±€å‘½åç©ºé—´** å¼€å§‹æŸ¥æ‰¾â€ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼š

```cpp
::std_msgs::msg::String
```

æ„æ€æ˜¯ï¼š

> ä»å…¨å±€å‘½åç©ºé—´ï¼ˆæœ€å¤–å±‚ï¼‰å¼€å§‹ï¼Œæ‰¾åˆ° `std_msgs` â†’ `msg` â†’ `String` è¿™ä¸ªç±»å‹ã€‚

è¿™åœ¨æœ‰åµŒå¥—ç±»æˆ–å±€éƒ¨å‘½åç©ºé—´æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œ
å¯ä»¥é˜²æ­¢å‘½åå†²çªæˆ–è§£æé”™è¯¯ã€‚

---

### âœ… ä¸¾ä¾‹å¯¹æ¯”ï¼š

å‡è®¾ä½ å†™äº†ï¼š

```cpp
namespace my_package {
  struct String {};
}
```

é‚£å¦‚æœä½ åœ¨ä»£ç é‡Œå†™ï¼š

```cpp
std_msgs::msg::String msg_;
```

æ²¡é—®é¢˜ï¼Œç¼–è¯‘å™¨çŸ¥é“æ‰¾ ROS çš„ã€‚

ä½†å¦‚æœå†™ï¼š

```cpp
String msg_;
```

é‚£ç¼–è¯‘å™¨å¯èƒ½ä¼šè¯¯ä»¥ä¸ºä½ æƒ³ç”¨çš„æ˜¯ä½ è‡ªå·±å®šä¹‰çš„ `my_package::String`ã€‚

æ‰€ä»¥ä¸ºäº† **ç¡®ä¿ä¸€å®šä½¿ç”¨ ROS çš„ String ç±»å‹**ï¼Œ
å¼€å‘è€…å¸¸å¸¸å†™æˆï¼š

```cpp
::std_msgs::msg::String msg_;
```

---

## ğŸ§  ä¸‰ã€å®Œæ•´ç†è§£ï¼šé‚£è¿™è¡Œä»£ç åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ

```cpp
private:
  ::std_msgs::msg::String msg_;
```

âœ… å®ƒåœ¨å½“å‰ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªæˆå‘˜å˜é‡ `msg_`ï¼Œ
ç±»å‹æ˜¯ ROS çš„æ ‡å‡†æ¶ˆæ¯ `std_msgs::msg::String`ã€‚

ğŸ‘‰ ç”¨æ¥ä¸´æ—¶å­˜æ”¾è¦å‘å¸ƒçš„æ¶ˆæ¯å†…å®¹ã€‚

æ¯”å¦‚åœ¨å‘å¸ƒå™¨ä¸­ï¼š

```cpp
msg_.data = "Hello ROS2";
publisher_->publish(msg_);
```

---

## ğŸ§¾ å››ã€å°ç»“ä¸€ä¸‹

| æ¦‚å¿µ                                   | å«ä¹‰                            |
| ------------------------------------ | ----------------------------- |
| `#include <std_msgs/msg/string.hpp>` | å¼•å…¥ ROS 2 çš„æ ‡å‡†å­—ç¬¦ä¸²æ¶ˆæ¯å®šä¹‰           |
| `std_msgs`                           | ROS 2 è‡ªå¸¦çš„â€œæ ‡å‡†æ¶ˆæ¯åŒ…â€              |
| `std_msgs::msg::String`              | ROS 2 çš„å­—ç¬¦ä¸²æ¶ˆæ¯ç±»å‹ï¼Œåªæœ‰ä¸€ä¸ªæˆå‘˜ `data`  |
| `::`                                 | å…¨å±€å‘½åç©ºé—´è§£æç¬¦ï¼Œä¿è¯æ‰¾çš„æ˜¯å…¨å±€çš„ `std_msgs` |
| `msg_`                               | ç±»çš„ç§æœ‰æˆå‘˜å˜é‡ï¼Œç”¨äºå­˜æ”¾è¦å‘å¸ƒçš„æ¶ˆæ¯æ•°æ®         |

---

