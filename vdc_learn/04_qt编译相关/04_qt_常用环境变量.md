Qt5 程序在运行时，有 **一组常用的环境变量** 用来指定插件、库、QML 模块、样式、平台等位置。
这些变量在「手动部署 Qt 程序」或「离线运行 Qt 程序（非系统安装）」中特别重要。

下面我给你一份**最常用、最基础的 Qt Runtime 环境变量清单**，并举例说明一般工程会用到哪些。

---

# 🟦 **Qt5 基础环境变量最常用列表**

## ① **QT_PLUGIN_PATH（插件路径）— 最常用**

指定 Qt 插件的位置，例如：

* platforms 插件（xcb）
* imageformats（png/jpeg）
* styles（fusion 等）
* sqldrivers
* iconengines

示例：

```bash
export QT_PLUGIN_PATH=/path/to/runtime/plugins
```

如果缺少，会报类似：

```
Could not find the Qt platform plugin "xcb"
```

---

## ② **QT_QPA_PLATFORM_PLUGIN_PATH（仅平台插件）**

比 QT_PLUGIN_PATH 还更精准，只指定 platforms 目录。

```
export QT_QPA_PLATFORM_PLUGIN_PATH=/path/to/runtime/plugins/platforms
```

用这个可以避免插件搜索冲突。

---

## ③ **QT_QPA_PLATFORM（选择平台渲染后端）**

例如：

```
xcb
wayland
offscreen
linuxfb
minimal
```

示例：

```bash
export QT_QPA_PLATFORM=xcb
```

有时在 docker 或无界面服务器运行需要：

```bash
export QT_QPA_PLATFORM=offscreen
```

---

## ④ **QML2_IMPORT_PATH（QML 模块路径）**

QtQuick 或 QML 工程必须设置，否则会报：

```
module "QtQuick.Controls" is not installed
```

示例：

```bash
export QML2_IMPORT_PATH=/path/to/runtime/qml
```

可指定多个路径：

```bash
export QML2_IMPORT_PATH=/app/qml:/third/qml
```

---

## ⑤ **QT_QUICK_CONTROLS_STYLE（QML 控件风格）**

例如：

```
Material
Fusion
Universal
Imagine
```

示例：

```bash
export QT_QUICK_CONTROLS_STYLE=Material
```

---

## ⑥ **QT_LOGGING_RULES（控制 Qt 日志输出）**

禁用所有 Qt Debug 日志：

```bash
export QT_LOGGING_RULES="*.debug=false"
```

开启某模块日志：

```bash
export QT_LOGGING_RULES="qt.qml.binding=true"
```

---

## ⑦ **QT_SCALE_FACTOR（缩放）**

强制 DPI 缩放：

```bash
export QT_SCALE_FACTOR=1.5
```

常用于高分屏、隐藏 DPI 问题。

---

## ⑧ **QT_STYLE_OVERRIDE（Qt Widgets 样式）**

用于 Widgets 选择主题：

```bash
export QT_STYLE_OVERRIDE=Fusion
```

除了 Fusion 之外还可能有：

```
GTK+
Windows
Motif
```

---

## ⑨ **LD_LIBRARY_PATH（Linux Qt 动态库路径）**

如果 Qt5 没装在系统目录，而是私有部署，则需要：

```bash
export LD_LIBRARY_PATH=/path/to/qt/lib
```

否则运行会报：

```
error while loading shared libraries: libQt5Core.so.5: cannot open shared object file
```

---

# 🟩 **总结：最常用的 Qt deployment 环境变量组合（实用模板）**

如果你有一个独立部署的 Qt 程序（不依赖系统 Qt），一般最常用配置如下：

```bash
export LD_LIBRARY_PATH=./runtime/lib
export QT_PLUGIN_PATH=./runtime/plugins
export QT_QPA_PLATFORM_PLUGIN_PATH=./runtime/plugins/platforms
export QML2_IMPORT_PATH=./runtime/qml
export QT_QPA_PLATFORM=xcb
```

如果你的程序用 QML Controls：

```bash
export QT_QUICK_CONTROLS_STYLE=Material
```

如果在服务器运行（无显示）：

```bash
export QT_QPA_PLATFORM=offscreen
```

---

# 🟧 要不要我帮你写一个完整的 Qt Runtime `run.sh` 自动配置脚本？

我可以生成适合你项目的：

```
./run.sh
```

内容自动设置：

* LD_LIBRARY_PATH
* QT_PLUGIN_PATH
* QML2_IMPORT_PATH
* platform plugin
* 图片插件
* 自定义主题或图标路径

你只需要告诉我：

### ✔ 你的程序路径

### ✔ runtime 目录结构（plugins/lib/qml 是否都有）

我可以直接生成可以运行的版本。
