ä¸‹é¢æˆ‘å¸®ä½ **æ·±å…¥è§£é‡Š**ï¼š

```bash
$(dirname $(readlink -f $0))
```

è¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„ Bash æŠ€å·§ï¼Œç”¨æ¥è·å– **å½“å‰è„šæœ¬æ‰€åœ¨çš„ç»å¯¹è·¯å¾„ï¼ˆä¸ä¾èµ–æ‰§è¡Œä½ç½®ï¼‰**ã€‚

---

# âœ… 1. `$0` æ˜¯ä»€ä¹ˆï¼Ÿ

`$0` = å½“å‰è„šæœ¬çš„è·¯å¾„ï¼ˆå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼‰

ä¾‹å­ï¼š

ä½ æ‰§è¡Œï¼š

```
./build.sh
```

é‚£ä¹ˆ `$0 = ./build.sh`

ä½ æ‰§è¡Œï¼š

```
bash /home/user/project/build/scripts/build.sh
```

é‚£ä¹ˆ `$0 = /home/user/project/build/scripts/build.sh`

---

# âœ… 2. `readlink -f $0` çš„ä½œç”¨

ä½œç”¨ï¼š**æŠŠ $0 è½¬æ¢æˆç»å¯¹è·¯å¾„ï¼Œå¹¶è§£æç¬¦å·é“¾æ¥ï¼ˆè½¯è¿æ¥ï¼‰**

ä¾‹å¦‚ï¼š

| è¾“å…¥ `$0`              | `readlink -f $0` è¾“å‡º                         |
| -------------------- | ------------------------------------------- |
| `./build.sh`         | `/home/user/project/build/scripts/build.sh` |
| `scripts/build.sh`   | `/home/user/project/build/scripts/build.sh` |
| `/abs/path/build.sh` | `/abs/path/build.sh`                        |
| è„šæœ¬æ˜¯è½¯è¿æ¥               | è¿”å›çœŸå®è·¯å¾„                                      |

æ‰€ä»¥ï¼Œ`readlink -f $0` æ€»èƒ½å¾—åˆ°è„šæœ¬æ–‡ä»¶çš„çœŸå®ç»å¯¹è·¯å¾„ã€‚

---

# âœ… 3. `dirname` çš„ä½œç”¨

ä» **å®Œæ•´è·¯å¾„ä¸­å»æ‰æ–‡ä»¶å**ï¼Œåªä¿ç•™ç›®å½•éƒ¨åˆ†ã€‚

ä¾‹å­ï¼š

```
dirname /home/user/project/build/scripts/build.sh
```

å¾—åˆ°ï¼š

```
/home/user/project/build/scripts
```

---

# ğŸ”¥ 4. åˆèµ·æ¥çš„æœ€ç»ˆç»“æœ

```bash
$(dirname $(readlink -f $0))
```

æœ€ç»ˆæ•ˆæœï¼š

ğŸ‘‰ **æ— è®ºä½ ä»å“ªé‡Œæ‰§è¡Œè„šæœ¬ï¼Œéƒ½èƒ½è·å¾—è„šæœ¬æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„ã€‚**

ä¾‹å¦‚è„šæœ¬å®é™…è·¯å¾„ï¼š

```
/home/user/project/build/scripts/build.sh
```

ä½ åœ¨ä»»ä½•åœ°æ–¹æ‰§è¡Œï¼š

```
cd /tmp
/home/user/project/build/scripts/build.sh
```

æˆ–è€…

```
cd ~
bash /home/user/project/build/scripts/build.sh
```

ç”šè‡³ï¼š

```
ln -s /home/user/project/build/scripts/build.sh run.sh
./run.sh
```

å®ƒæ€»èƒ½å¾—åˆ°ï¼š

```
/home/user/project/build/scripts
```

---

# ğŸ§  ä¸ºä»€ä¹ˆå¿…é¡»ç”¨è¿™æ®µä»£ç ï¼Ÿ

å› ä¸ºé¡¹ç›®ä¸­æœ‰è¿™ç§å†™æ³•ï¼š

```bash
readonly PROJECT_ROOT=$(readlink -f $BUILD_PATH/..)
```

æ¡†æ¶éœ€è¦ï¼š

* è‡ªåŠ¨æ‰¾åˆ° build.sh çš„ä½ç½®
* æ ¹æ®è„šæœ¬ä½ç½®æ¨ç®—é¡¹ç›®æ ¹ç›®å½•
* æ— è®ºä½ åœ¨å“ªé‡Œæ‰§è¡Œè„šæœ¬éƒ½èƒ½æ­£ç¡®æ‰¾åˆ°è·¯å¾„

å¦åˆ™è„šæœ¬å°±åªèƒ½ä»å›ºå®šä½ç½®æ‰§è¡Œï¼Œå¾ˆéº»çƒ¦ã€‚

---

# ğŸ“Œ 5. ç”¨ä¸€å¥è¯æ€»ç»“

```bash
$(dirname $(readlink -f $0))
```

**å°±æ˜¯ï¼šè·å¾—å½“å‰è„šæœ¬æ‰€åœ¨ç›®å½•çš„çœŸå®ç»å¯¹è·¯å¾„ã€‚**

---

# æƒ³ç»§ç»­æ·±å…¥å—ï¼Ÿ

æˆ‘å¯ä»¥å¸®ä½ å†è§£é‡Šï¼š

* `readlink -f` ä¸ºä»€ä¹ˆæ¯” `pwd` æ›´å®‰å…¨
* å¦‚ä½•æ‰‹å†™ä¸€ä¸ªæ›´ç¨³å¥çš„ç‰ˆæœ¬
* å¦‚ä½•åœ¨è„šæœ¬ä¸­ä½¿ç”¨æ­¤è·¯å¾„ç®¡ç†ç³»ç»Ÿ
* ä¸ºä»€ä¹ˆå¾ˆå¤šå¤§å‹å·¥ç¨‹ï¼ˆQNXã€AOSPã€ROS2 ç­‰ï¼‰éƒ½ç”¨è¿™ä¸ªæŠ€å·§

ä½ æƒ³ç»§ç»­å­¦å“ªä¸€éƒ¨åˆ†ï¼Ÿ
