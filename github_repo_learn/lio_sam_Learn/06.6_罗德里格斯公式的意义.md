你问的非常关键——为什么我们希望把旋转矩阵微分方程

[
$$\dot R(t) = R(t) [\omega]_\times$$
]

写成离散闭式公式

[
$$R(t+\Delta t) = \exp([\theta]_\times) R(t), \quad \theta = \omega \Delta t$$
]

本质上是**为了方便数值积分和保持旋转矩阵的正交性**。我详细解释一下原因：

---

# 1️⃣ 连续时间 vs 离散时间

* 连续时间公式 $(\dot R = R [\omega]_\times)$ 是微分方程，只能表示“瞬时变化率”。
* 实际工程中，IMU 采样是离散的：每隔 $(\Delta t)$ 采样一次。
* 我们需要求每个时间步的 **旋转矩阵更新** $(R_{k+1})$ 从 $(R_k)$ 推出来。

---

# 2️⃣ 为什么不能直接用 $(R_{k+1} = R_k + \dot R \Delta t)$

* 如果用欧拉近似：

[
$$R_{k+1} \approx R_k + \dot R_k \Delta t = R_k + R_k [\omega]_ \times \Delta t = R_k (I + [\theta]_\times)$$
]

* 这种方法有问题：

  1. **近似误差**大，尤其是角速度大或 $(\Delta t)$ 较长时
  2. **旋转矩阵正交性丢失**，即 $(R_{k+1}^\top R_{k+1} \neq I)$

所以单纯欧拉积分在 SLAM/IMU 预积分中容易累积漂移。

---

# 3️⃣ 指数映射的优势

* 定义旋转矩阵指数映射：

[
$$\exp([\theta]*\times) = I + \frac{\sin|\theta|}{|\theta|}[\theta]*\times + \frac{1-\cos|\theta|}{|\theta|^2} [\theta]_\times^2$$
]

* 特点：

  1. **保持正交性**：$(\exp([\theta]_\times) \in SO(3))$，乘上 $(R_k)$ 后仍然是旋转矩阵
  2. **精确闭式解**：不依赖小角度近似
  3. 可以自然处理大角度旋转，适合离散 IMU 积分

---

# 4️⃣ 几何意义

* $(\theta = \omega \Delta t)$ 是旋转向量（角轴 × 旋转角度）
* $(\exp([\theta]_\times))$ 就是绕这个旋转轴旋转 $(|\theta|)$ 弧度的旋转矩阵
* 更新公式：

[
$R_{k+1} = R_k \exp([\theta]_\times)$
]

表示“在当前姿态 $(R_k)$ 基础上，沿机体测得角速度旋转 $(\Delta t)$ 后得到新的姿态”。

---

# ✅ 总结

**我们希望用这个公式的原因**：

1. 离散时间下给出**旋转矩阵更新的闭式解**
2. 保证更新后的 $(R_{k+1} \in SO(3))$，不失正交性
3. 精确表示有限旋转，避免小角度近似带来的误差
4. 方便在 IMU 离散积分、预积分、SLAM 后端优化中使用

---

如果你愿意，我可以画一张图，把连续微分方程 $(\dot R = R[\omega]*\times)$ → 离散闭式更新 $(R*{k+1} = R_k \exp([\theta]_\times))$ 的**几何意义直观展示**，让你瞬间理解为什么要用指数映射。

你想看吗？
