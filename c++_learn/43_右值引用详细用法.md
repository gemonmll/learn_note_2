å¯ä»¥ï¼Œä½†è¦çœ‹ä½ åœ¨ä»€ä¹ˆåœºæ™¯ä½¿ç”¨ã€‚
æœ€å…³é”®åŒºåˆ«åœ¨äºï¼š

# âœ… **æ˜¯å¦éœ€è¦ `std::move(builder)`ï¼Ÿ**

## æƒ…å†µ 1ï¼š

ä½ å†™ï¼š

```cpp
std::string buf = builder.build();
```

âš ï¸ **å¯ä»¥**ï¼Œä½†æ˜¯ï¼š

* `build()` è¿”å› `std::string`
* `builder` æœ¬èº«è¿˜åœ¨
* å¯èƒ½ä¼šå‘ç”Ÿä¸€æ¬¡ **é¢å¤–çš„å­—ç¬¦ä¸²å¤åˆ¶**

å› ä¸º `build()` çš„è¿”å›å€¼ä¼šè¢«æ‹·è´/ç§»åŠ¨åˆ° `buf` ä¸­ã€‚

---

## æƒ…å†µ 2ï¼ˆæ¨èï¼‰ï¼š

ä½ å†™ï¼š

```cpp
std::string buf = std::move(builder).build();
```

è¿™æ˜¯ç›®å‰ä½ ä»£ç ä¸­çš„å†™æ³•ã€‚

âœ” **è¿™æ˜¯æœ€ä¼˜çš„å†™æ³•ï¼Œæ²¡æœ‰é¢å¤–æ‹·è´ï¼**
å› ä¸ºï¼š

* `std::move(builder)` æŠŠ builder è§†ä¸ºå³å€¼ï¼ˆä¸´æ—¶å¯¹è±¡ï¼‰
* è°ƒç”¨çš„æ˜¯ `build() &&`ï¼ˆå³å€¼é™å®šç¬¦ï¼‰
* build() å†…éƒ¨è¿”å› `std::move(buf_)`
* æ•´ä¸ªè¿‡ç¨‹åªå‘ç”Ÿä¸€æ¬¡ç§»åŠ¨ï¼Œä¸å‘ç”Ÿ copy

ä¹Ÿå°±æ˜¯è¯´æ•ˆç‡æœ€é«˜ã€‚

---

# ğŸ” **é‚£å¦‚æœæˆ‘ç›´æ¥å†™ builder.build() ä¼šæ€æ ·ï¼Ÿ**

ä½ çš„ build() å®šä¹‰æ˜¯è¿™æ ·ï¼š

```cpp
std::string build() && {
    return std::move(buf_);
}
```

æ³¨æ„è¿™é‡Œçš„ **`&&` å³å€¼é™å®šç¬¦**ã€‚

è¿™ä»£è¡¨ï¼š

* build() **åªèƒ½åœ¨å³å€¼å¯¹è±¡ä¸Šè°ƒç”¨**
* å·¦å€¼ builder **æ— æ³•ç›´æ¥è°ƒç”¨**

æ‰€ä»¥å¦‚æœä½ å†™ï¼š

```cpp
std::string buf = builder.build();  // âŒ ä¼šç¼–è¯‘å¤±è´¥
```

å› ä¸º builder æ˜¯å·¦å€¼å¯¹è±¡ã€‚

ä½ ä¼šå¾—åˆ°ç±»ä¼¼é”™è¯¯ï¼š

```
error: cannot call 'build' because it is an rvalue-qualified function
```

---

# ğŸ§© **æ­£ç¡®å†™æ³•æœ‰ä¸¤ä¸ª**

## âœ” æ–¹æ³• 1ï¼ˆæœ€æ¨èï¼Œæœ€ä¼˜æ€§èƒ½ï¼‰ï¼š

```cpp
std::string buf = std::move(builder).build();
```

## âœ” æ–¹æ³• 2ï¼ˆè®© build åŒæ—¶æ”¯æŒå·¦å€¼å’Œå³å€¼ï¼‰

å¦‚æœä½ ä¸æƒ³å†™ `std::move(builder)`ï¼Œä½ å¿…é¡»æŠŠ build çš„ç­¾åæ”¹æˆï¼š

```cpp
std::string build() {
    return std::move(buf_);
}
```

ä½†è¿™ä¼šå¯¼è‡´ï¼š

* å·¦å€¼/å³å€¼éƒ½èƒ½è°ƒç”¨
* ä¼šå¯¼è‡´ builder å¯¹è±¡ç»§ç»­ä¿æŒ dirty çŠ¶æ€
* ä¸å¦‚å³å€¼é™å®šç¬¦å®‰å…¨

---

# ğŸ æœ€ç»ˆå»ºè®®ï¼šç”¨ä½ ç°åœ¨çš„å†™æ³•æœ€å¥½

### ğŸ”¥ æ¨èï¼š

```cpp
std::string buf = std::move(builder).build();
```

ç†ç”±ï¼š

* 100% å®‰å…¨
* 0 æ‹·è´
* æœ€ç°ä»£ C++ é£æ ¼
* æ˜ç¡®å‘Šè¯‰è¯»è€… builder å·²ç»â€œæ¶ˆè€—æ‰â€ï¼ˆç¬¦åˆ builder è®¾è®¡æ¨¡å¼ï¼‰

---

# ğŸ“Œ å¦‚æœä½ æƒ³è®© build() åŒæ—¶æ”¯æŒå·¦å€¼å’Œå³å€¼ï¼Œæˆ‘å¯ä»¥å¸®ä½ å†™ä¸€ä¸ªâ€œä¸¤å¥— build() é‡è½½â€çš„æ›´ä¼˜é›…ç‰ˆæœ¬ã€‚

éœ€è¦å—ï¼Ÿ
